<!doctype html>
<html>
<head>
    <title>Location Estimator</title>
    <style>
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .wrapper {
            background: lightblue;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .streetviewcontainer {
            flex: 1;
            position: relative;
        }
        #mainiframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        #topbar {
            background: #353541;
            position: absolute;
            width: 100%;
            height: 66px;
            top: 0;
            left: 0;
            color: #ffffff;
            box-shadow: 0px 3px 15px rgba(0,0,0,0.2);
        }

        #guessbutton {
            opacity: 0.7;
            transition: all 0.5s ease-in-out;
            position: absolute;
            bottom: 0px;
            left: 50%;
            transform: translate(-50%, 0);
            height: 0%;
            width: 500px;
            background: black;
            color: whitesmoke;
            border-style: solid;
            border: none;
            border-radius: 0px;
            padding: 0px;
            cursor: pointer;
            z-index: 2;

        }
        .mapsmall {
            transition: all 0.5s ease-in-out;
            height: 300px;
            width: 500px;
            position: absolute;
            bottom: 20px;
            right: 70px;

        }

        .mapsmall:hover {
            bottom: 20px;
            height: 600px;
            width: 1000px;
            transition: all 0.5s ease-in-out;
            opacity: 1;

        }

        .mapsmall:hover #guessbutton {
            display: block;
            transition: all 0.5s ease-in-out;
            width: 100%;
            border-radius: 30px;
            height: 6%;
        }

        .mapsmall:hover #map {
            transition: all 0.5s ease-in-out;
            height: 93%;
        }

        .mapfs {
            transition: none;
            position: absolute;
            top: 0;
            width: 100%;
            height: 65%;
            right: 0;
            bottom:  0;

        }

        #map {
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 1;
            transition: all 0.5s ease-in-out;
        }

        #winscreen {
            display: none;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 35%;
            background: lightgray;
        }

        #winscreen\.box {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            width: 900px;
            height: 300px;
            border-radius: 30px;
            border-style: none;
            z-index: 3;
        }

        #winscreen\.distance {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translate(-50%, 0);
            color: black;
            z-index: 5;
            font-style: normal;
            font-family: Nunito Sans, sans-serif;
            font-size: 16px;
            font-weight: normal;
        }

        #winscreen\.time {
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translate(-50%, 0);
            color: black;
            z-index: 5;
            font-style: normal;
            font-family: Nunito Sans, sans-serif;
            font-size: 16px;
            font-weight: normal;
        }

        #winscreen\.timer {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translate(-50%, 0);
            color: black;
            font-family: "Dosis", sans-serif;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
            font-size: 60px;
        }

        #newlocationbutton {
            position: absolute;
            top: 70%;
            left: 50%;
            transform: translate(-50%, 0);
            background: #548106;
            color: white;
            width: 200px;
            height: 35px;
            border-radius: 30px;
            border-radius: 10px;
            border-style: none;
            z-index: 4;
            font-family: 'Inter', sans-serif;
            font-style: normal;
            font-weight: bold;
            font-size: 13px;
        }

        #github-link {
            position: absolute;
            top: 15%;
            right: 10px;
            color: white;
            font-size: 12px;
            text-decoration: none;
        }

        #timer-box {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translate(-50%, 0);
            width: 300px;
            height: 90px;
            border-radius: 0px 0px 30px 30px;
            background: #6b687f;
            font-size: 12px;
            z-index: 12;
            box-shadow: 10px 10px 10px rgba(0,0,0,0.2);
        }

        .no-hover {
            pointer-events: none;
        }

        #timer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: "Dosis", sans-serif;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
            font-size: 50px;
        }

        img.huechange { filter: hue-rotate(120deg); }
    </style>


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjwhLS0gVXBsb2FkZWQgdG86IFNWRyBSZXBvLCB3d3cuc3ZncmVwby5jb20sIEdlbmVyYXRvcjogU1ZHIFJlcG8gTWl4ZXIgVG9vbHMgLS0+Cjxzdmcgd2lkdGg9IjgwMHB4IiBoZWlnaHQ9IjgwMHB4IiB2aWV3Qm94PSIwIDAgMTUgMTUiIHZlcnNpb249IjEuMSIgaWQ9Im1hcmtlciIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPHBhdGggaWQ9InBhdGg0MTMzIiBkPSJNNy41LDBDNS4wNjc2LDAsMi4yMjk3LDEuNDg2NSwyLjIyOTcsNS4yNzAzJiN4QTsmI3g5O0MyLjIyOTcsNy44Mzc4LDYuMjgzOCwxMy41MTM1LDcuNSwxNWMxLjA4MTEtMS40ODY1LDUuMjcwMy03LjAyNyw1LjI3MDMtOS43Mjk3QzEyLjc3MDMsMS40ODY1LDkuOTMyNCwwLDcuNSwweiIvPg0KPC9zdmc+">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>


</head>

<body>
<div class="wrapper">
    <div class="streetviewcontainer">
        <iframe id="mainiframe" src=""></iframe>
        <div id="topbar">
            <div id="timer-box">
                <div id="timer">0:00</div>
            </div>
            <a href="https://github.com/fvollmer0" id="github-link">
                <svg width="48" height="48" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <path d="M12,2C6.477,2,2,6.477,2,12c0,4.419,2.865,8.166,6.839,9.489c0.5,0.09,0.682-0.218,0.682-0.484 c0-0.236-0.009-0.866-0.014-1.699c-2.782,0.602-3.369-1.34-3.369-1.34c-0.455-1.157-1.11-1.465-1.11-1.465 c-0.909-0.62,0.069-0.608,0.069-0.608c1.004,0.071,1.532,1.03,1.532,1.03c0.891,1.529,2.341,1.089,2.91,0.833 c0.091-0.647,0.349-1.086,0.635-1.337c-2.22-0.251-4.555-1.111-4.555-4.943c0-1.091,0.39-1.984,1.03-2.682 C6.546,8.54,6.202,7.524,6.746,6.148c0,0,0.84-0.269,2.75,1.025C10.295,6.95,11.15,6.84,12,6.836 c0.85,0.004,1.705,0.114,2.504,0.336c1.909-1.294,2.748-1.025,2.748-1.025c0.546,1.376,0.202,2.394,0.1,2.646 c0.64,0.699,1.026,1.591,1.026,2.682c0,3.841-2.337,4.687-4.565,4.935c0.359,0.307,0.679,0.917,0.679,1.852 c0,1.335-0.012,2.415-0.012,2.741c0,0.269,0.18,0.579,0.688,0.481C19.138,20.161,22,16.416,22,12C22,6.477,17.523,2,12,2z"></path>
                </svg>
            </a>
        </div>
        <div class="mapsmall" id="mapwrapper">
            <div id="map"></div>
            <input type="button" value="Guess" id="guessbutton" />
        </div>
        <div id="winscreen">
            <div id="winscreen.box">
                <div id="winscreen.distance">Your guess was of by <b id="distance"></b>.</div>
                <div id="winscreen.time">This took you.</div>
                <div id="winscreen.timer">0:00</div>

                <input type="button" id="newlocationbutton" value="NEXT LOCATION" id="New Location" />
            </div>
        </div>
    </div>
</div>
<script>
    window.onload = function() {

        var guessbutton = document.getElementById("guessbutton")
        var newlocationbutton = document.getElementById("newlocationbutton")
        var map = L.map(document.getElementById("map")).setView([0, 0], 0);
        var guessed = false;
        var mapwrapper = document.getElementById("mapwrapper");
        var time = 0;
        var guessmarker = null;
        var realmarker = null;
        var reallat = null;
        var reallng = null;
        var pathLine = null;
        var distance = null;



        function calculateDistance(lat1, lon1, lat2, lon2) {
            var R = 6371e3;
            var a = lat1 * (Math.PI/180);
            var b = lat2 * (Math.PI/180);
            var c = (lat2-lat1) * (Math.PI/180);
            var d = (lon2-lon1) * (Math.PI/180);
            var a = Math.sin(c/2) * Math.sin(c/2) +
                Math.cos(a) * Math.cos(b) *
                Math.sin(d/2) * Math.sin(d/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            var distance = R * c;
            return distance;
        }

        function changeClass(object,oldClass,newClass)
        {
            var regExp = new RegExp('(?:^|\\s)' + oldClass + '(?!\\S)', 'g');
            object.className = object.className.replace( regExp , newClass );
        }

        function  initMap() {
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 16,
                minZoom: 2,
                maxBounds: null,
                maxBoundsViscosity: 10,

            }).addTo(map);

            map.setMaxBounds([
                [90, 180],
                [-90, -180]
            ]);

            function onMapClick(e) {
                if (guessed) {
                    return;
                }
                if (guessmarker != null) {
                    map.removeLayer(guessmarker);
                }
                guessmarker = L.marker(e.latlng).addTo(map);
                guessmarker._icon.classList.add("huechange");

                guessbutton.style.background = "#5f9905";
                guessbutton.style.opacity = "1";
            }

            const resizeObserver = new ResizeObserver(() => {
                map.invalidateSize();
            });

            resizeObserver.observe(document.getElementById("mapwrapper"));

            map.on('click', onMapClick);

        }

        function newLocation() {
            var iframe = document.getElementById("mainiframe")
            var coordinates = [
                {lat: 40.3840621034322, lng: 28.82543092147938, cc: "tr"},{lat: 25.023185437290493, lng: 83.04459182562856, cc: "in"},{lat: 23.071297814194107, lng: 71.35849313264144, cc: "in"},{lat: 37.121124405900666, lng: -121.62144576857031, cc: "us"},{lat: 36.93631816529546, lng: 22.191631194520845, cc: "gr"},{lat: 43.7599858189828, lng: 39.51781328210602, cc: "ru"},{lat: 31.06213311037683, lng: 130.6784428599771, cc: "jp"},{lat: 27.328844417324877, lng: 70.85579660020478, cc: "in"},{lat: 45.11617139051008, lng: 1.1875435124490936, cc: "fr"},{lat: 39.83890928273793, lng: -99.81489553782299, cc: "us"},{lat: 40.052485205615746, lng: 3.8851309379190813, cc: "es"},{lat: 31.040319278270577, lng: -84.87913105322912, cc: "us"},{lat: 8.573758639068254, lng: 99.2135906245779, cc: "th"},{lat: 44.40967836664376, lng: -103.50909156981393, cc: "us"},{lat: 41.650128941230314, lng: 12.486140414855697, cc: "it"},{lat: 69.47185786483084, lng: 25.51141479835529, cc: "no"},{lat: 63.764879124933735, lng: 9.809551338403024, cc: "no"},{lat: 35.06182052834102, lng: -108.84371750739697, cc: "us"},{lat: 52.23460194839797, lng: 43.96220759249043, cc: "ru"},{lat: 53.800028613176394, lng: -113.65208788879502, cc: "ca"},{lat: 37.749856897067936, lng: -81.2211595110972, cc: "us"},{lat: -2.6282394488248433, lng: 121.37085641628377, cc: "id"},{lat: 30.126386057939158, lng: 76.85860394433239, cc: "in"},{lat: 40.681790239263954, lng: -96.50431210603435, cc: "us"},{lat: 63.792156738867156, lng: 28.648010378599043, cc: "fi"},{lat: 51.623105599999995, lng: 21.3178706, cc: "pl"},{lat: 30.636935883396035, lng: -96.31863197301611, cc: "us"},{lat: 46.30025224908138, lng: 15.849603576217872, cc: "si"},{lat: 47.43129504513448, lng: 26.87752404643152, cc: "ro"},{lat: 37.65812655721005, lng: -96.53265946396884, cc: "us"},{lat: 38.19917776885344, lng: -91.59398067426696, cc: "us"},{lat: 49.21352564785947, lng: -1.2979974750434828, cc: "fr"},{lat: 3.2119633999999997, lng: 73.0363295, cc: "mv"},{lat: -25.40930749285032, lng: 28.287074382200974, cc: "za"},{lat: 43.10313662787615, lng: -71.11058253536581, cc: "us"},{lat: 36.264721486437, lng: -94.6914709988449, cc: "us"},{lat: -28.006366519284565, lng: 151.5917794931911, cc: "au"},{lat: 18.309211250265996, lng: 100.15709293640634, cc: "th"},{lat: 35.92804735823935, lng: -119.27817982562361, cc: "us"},{lat: 65.9502911450191, lng: 29.166939826675016, cc: "fi"},{lat: 42.079468291136656, lng: -92.30853524461439, cc: "us"},{lat: 43.242390325014625, lng: 23.186660863219416, cc: "bg"},{lat: -31.38639250283848, lng: -64.49393242993435, cc: "ar"},{lat: 49.69005552176748, lng: -1.3777405814120307, cc: "fr"},{lat: -30.10001819498365, lng: -52.36700294227437, cc: "br"},{lat: 24.64787119963095, lng: 74.78888893008288, cc: "in"},{lat: 59.169040357849354, lng: 26.158162962697908, cc: "ee"},{lat: -4.67836191131826, lng: 105.45049598373335, cc: "id"},{lat: 32.38935433528941, lng: -97.9190561733602, cc: "us"},{lat: 45.34947438797994, lng: 17.86895936668546, cc: "hr"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: 42.54803904988177, lng: 22.509685774159486, cc: "bg"},{lat: 48.74067642333113, lng: 13.603162915963521, cc: "de"},{lat: 43.95471277568775, lng: 12.440431800564554, cc: "sm"},{lat: 24.607560572600235, lng: 121.68088488465607, cc: "tw"},{lat: -6.629681501972777, lng: 106.77896363166722, cc: "id"},{lat: 49.39909839999256, lng: 21.640206839750444, cc: "sk"},{lat: 43.95471277568775, lng: 12.440431800564554, cc: "sm"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 52.60853211954669, lng: -8.911884404865871, cc: "ie"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 52.24015932207419, lng: 6.200289953189202, cc: "nl"},{lat: 46.833475123750695, lng: 26.499510234603964, cc: "ro"},{lat: 47.352850932856, lng: 7.338480351941516, cc: "ch"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 42.96166942334514, lng: 16.71683242515033, cc: "hr"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 18.200201961925956, lng: -67.1521005856378, cc: "us"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: 49.5945411428272, lng: 6.033236052148012, cc: "lu"},{lat: 47.34640942207862, lng: 9.260085990054431, cc: "ch"},{lat: -5.269871888316413, lng: 71.89580729118148, cc: "io"},{lat: -22.289952, lng: 166.61056309999998, cc: "fr"},{lat: 44.78121643968259, lng: 9.827765969362867, cc: "it"},{lat: 13.411266581462147, lng: -89.14020810645921, cc: "sv"},{lat: 45.32622289527593, lng: 16.2865806677942, cc: "hr"},{lat: 18.200201961925956, lng: -67.1521005856378, cc: "us"},{lat: 56.955592557292455, lng: 9.775651478447658, cc: "dk"},{lat: -0.15738799855801106, lng: -78.43880449542637, cc: "ec"},{lat: 59.36003000346186, lng: 27.049543977674855, cc: "ee"},{lat: 49.718576242611235, lng: 5.5838664427931874, cc: "be"},{lat: 52.89989766252033, lng: 5.937468988171374, cc: "nl"},{lat: 52.193215768012465, lng: 6.003984902518241, cc: "nl"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 56.70969226254642, lng: 25.493134330227804, cc: "lv"},{lat: 50.818283116160075, lng: 21.914355875732024, cc: "pl"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 18.44887029418024, lng: -66.14951250122736, cc: "us"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 24.920115022306643, lng: 121.13631865098165, cc: "tw"},{lat: 43.4916117, lng: -3.5307833, cc: "es"},{lat: 11.533258268921776, lng: 105.21180184659151, cc: "kh"},{lat: 24.854464123900925, lng: 92.1321077272296, cc: "bd"},{lat: 51.00002620805528, lng: 3.6499828166451254, cc: "be"},{lat: 39.64910010297729, lng: 27.885965594120727, cc: "tr"},{lat: 41.0828694896362, lng: -8.626982830507458, cc: "pt"},{lat: 34.69369828145618, lng: 135.607321360866, cc: "jp"},{lat: 41.68783541967957, lng: -84.85968376861496, cc: "us"},{lat: 18.44887029418024, lng: -66.14951250122736, cc: "us"},{lat: 60.36287026479573, lng: 5.149115835550179, cc: "no"},{lat: 34.169187917946026, lng: 35.91272180698551, cc: "lb"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 45.87534169577753, lng: 14.213425949466433, cc: "si"},{lat: 55.983433781746754, lng: 23.850263037787162, cc: "lt"},{lat: 18.44887029418024, lng: -66.14951250122736, cc: "us"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: -21.215342811730682, lng: 55.40362403447281, cc: "fr"},{lat: 26.28187226942553, lng: -80.128976560933, cc: "us"},{lat: 34.519368586551316, lng: 36.03681265055394, cc: "lb"},{lat: 48.730229526909625, lng: 13.138219857272297, cc: "de"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: -26.583138049808287, lng: 30.996767426426594, cc: "sz"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 34.96385801167143, lng: 32.399065092044744, cc: "cy"},{lat: 8.783411272049795, lng: -82.43328297413862, cc: "pa"},{lat: 49.24482994305504, lng: 18.917400667068033, cc: "sk"},{lat: -10.553615418095738, lng: 105.65174984533355, cc: "au"},{lat: 58.5378344, lng: 7.8751652, cc: "no"},{lat: 57.27019406673579, lng: 21.96560836238154, cc: "lv"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 42.933410711542535, lng: 25.350126517168114, cc: "bg"},{lat: 18.32217637219624, lng: -64.76616240958583, cc: "us"},{lat: 44.58170810393103, lng: 10.812522432643, cc: "it"},{lat: 65.26669634196755, lng: -14.383288844737383, cc: "is"},{lat: 42.5311461, lng: 20.0775686, cc: "al"},{lat: 37.67655690856609, lng: 126.84168113671704, cc: "kr"},{lat: 18.340391104371655, lng: -64.93051702580232, cc: "us"},{lat: 49.69542542102933, lng: 6.245653100932572, cc: "lu"},{lat: 50.0700480955348, lng: 14.99017347406185, cc: "cz"},{lat: 39.461282156158916, lng: 16.258518287123266, cc: "it"},{lat: 55.67480333058301, lng: 12.45791239656455, cc: "dk"},{lat: 0.24997552382869778, lng: 6.466698090398083, cc: "st"},{lat: -1.096148010177426, lng: 36.08573383220265, cc: "ke"},{lat: 48.58357926277143, lng: 14.95012071304781, cc: "at"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: 34.169187917946026, lng: 35.91272180698551, cc: "lb"},{lat: 55.07327946656759, lng: 8.931802139788578, cc: "dk"},{lat: 38.76972713643826, lng: 20.721399164699918, cc: "gr"},{lat: 45.93323340623514, lng: 8.567802188288915, cc: "it"},{lat: -5.3507954675918565, lng: 72.24545809051787, cc: "io"},{lat: 48.34630160559259, lng: 13.772125459849164, cc: "at"},{lat: 48.37639449175768, lng: 18.1207585653785, cc: "sk"},{lat: 47.12306579313454, lng: 2.235286165767209, cc: "fr"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 60.185716921597894, lng: 24.827700144495804, cc: "fi"},{lat: 18.32217637219624, lng: -64.76616240958583, cc: "us"},{lat: -7.635257518631905, lng: 111.42727904047045, cc: "id"},{lat: 18.340391104371655, lng: -64.93051702580232, cc: "us"},{lat: 42.6666332538802, lng: 25.383017184132243, cc: "bg"},{lat: 23.9912012273044, lng: 89.84780886910299, cc: "bd"},{lat: 58.10226063174249, lng: 27.450188998319454, cc: "ee"},{lat: 43.95471277568775, lng: 12.440431800564554, cc: "sm"},{lat: 58.38042932662825, lng: 11.264393404126166, cc: "se"},{lat: 49.89180756749651, lng: 2.3059941552678613, cc: "fr"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 32.797310191387325, lng: 34.974643390408474, cc: "il"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 40.92846213218943, lng: 8.824109091992137, cc: "it"},{lat: 24.84558018728659, lng: 88.56890940625236, cc: "bd"},{lat: -20.279651418812357, lng: 57.36622361102277, cc: "mu"},{lat: 42.359956613076754, lng: -3.558142228260977, cc: "es"},{lat: 35.715068129327605, lng: 128.4240673996077, cc: "kr"},{lat: 49.97085489077625, lng: 19.972199277943734, cc: "pl"},{lat: 41.81969664232816, lng: -6.619495568913434, cc: "pt"},{lat: 62.254166700000006, lng: -6.558611099999999, cc: "fo"},{lat: 47.24349877002672, lng: 8.519500030666395, cc: "ch"},{lat: -37.80560544848528, lng: -72.69360753723966, cc: "cl"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 53.699438350386394, lng: 13.806275086913665, cc: "de"},{lat: 18.412637699999998, lng: -66.6419361, cc: "us"},{lat: 42.2457086146665, lng: 18.904658047679384, cc: "me"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 50.9891792673039, lng: 33.97067900437321, cc: "ua"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 34.169187917946026, lng: 35.91272180698551, cc: "lb"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 25.234832828403185, lng: 55.279381359205736, cc: "ae"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 45.90791777905229, lng: 16.75584970482865, cc: "hr"},{lat: 42.02711213320388, lng: -8.572803292439506, cc: "pt"},{lat: 0.24997552382869778, lng: 6.466698090398083, cc: "st"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 62.254166700000006, lng: -6.558611099999999, cc: "fo"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 22.73693680242426, lng: 120.24690422026443, cc: "tw"},{lat: 37.58470081491444, lng: 36.92636047100948, cc: "tr"},{lat: 48.24071026294043, lng: 14.525997624983917, cc: "at"},{lat: 35.299709479361674, lng: 138.71282911189206, cc: "jp"},{lat: 57.483668698123104, lng: 9.950035410799877, cc: "dk"},{lat: 35.9036375281123, lng: 14.455504602013724, cc: "mt"},{lat: 40.390237041024356, lng: -3.721760295871696, cc: "es"},{lat: 35.01672890471965, lng: 25.066657311576293, cc: "gr"},{lat: 42.7358937, lng: 18.3339175, cc: "ba"},{lat: 49.13792176794379, lng: 20.217767423985485, cc: "sk"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 37.84049945493259, lng: 20.805262491185964, cc: "gr"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: 35.9036375281123, lng: 14.455504602013724, cc: "mt"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 62.0099303166259, lng: -6.772352164702669, cc: "fo"},{lat: 50.631640404384505, lng: 15.461404756488143, cc: "cz"},{lat: 46.56028989804622, lng: 6.5971847724601895, cc: "ch"},{lat: 24.060911393707016, lng: 88.7568588382562, cc: "bd"},{lat: 1.3328482060388167, lng: 103.93337804966097, cc: "sg"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 41.138663799999996, lng: 140.25957169999998, cc: "jp"},{lat: 49.843044238644794, lng: 24.04811955921945, cc: "ua"},{lat: -26.764771564867942, lng: -65.19414530911153, cc: "ar"},{lat: 49.082969689141514, lng: 6.639881359906852, cc: "fr"},{lat: 42.52974299134081, lng: 18.416432854575714, cc: "hr"},{lat: 32.6995716, lng: 35.576285299999995, cc: "il"},{lat: 46.5392465368813, lng: 6.573578449985971, cc: "ch"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 21.57673621368771, lng: 91.92596540979056, cc: "bd"},{lat: 38.392099904851726, lng: -0.9895577997291682, cc: "es"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 46.2475030381039, lng: 16.32536093246137, cc: "hr"},{lat: 29.302944305292076, lng: 48.04850220680237, cc: "kw"},{lat: 47.34640942207862, lng: 9.260085990054431, cc: "ch"},{lat: 53.07439370001669, lng: 6.668791278772457, cc: "nl"},{lat: 22.06152263448375, lng: 82.19759214366614, cc: "in"},{lat: 44.261875486360445, lng: 19.879057383084636, cc: "rs"},{lat: 33.65704341436103, lng: 130.95636639025312, cc: "jp"},{lat: 42.45379414342715, lng: 18.76611730034012, cc: "me"},{lat: 45.87534169577753, lng: 14.213425949466433, cc: "si"},{lat: 18.412637699999998, lng: -66.6419361, cc: "us"},{lat: -7.274746511495757, lng: -35.92648570221389, cc: "br"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 44.76216160046898, lng: 7.305963678595053, cc: "it"},{lat: 10.617100711283722, lng: 121.97194827515145, cc: "ph"},{lat: 49.95145098732723, lng: 7.11610771570324, cc: "de"},{lat: 37.293979429551534, lng: -3.1697011572759317, cc: "es"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 49.99976399516183, lng: 6.017063802525762, cc: "lu"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 1.7116546597730624, lng: 103.52758966391299, cc: "my"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 31.385560592070778, lng: 34.721619677334786, cc: "il"},{lat: 51.413930427405575, lng: 5.735973368054683, cc: "nl"},{lat: -5.3507954675918565, lng: 72.24545809051787, cc: "io"},{lat: 34.21893767597462, lng: 132.2293218563538, cc: "jp"},{lat: 44.01845328336018, lng: 18.261067412279775, cc: "ba"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: 42.02711213320388, lng: -8.572803292439506, cc: "pt"},{lat: 43.95471277568775, lng: 12.440431800564554, cc: "sm"},{lat: 48.494984722667425, lng: 20.438910627473195, cc: "sk"},{lat: 54.82706317838606, lng: 23.84629972375889, cc: "lt"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: 14.437115837609788, lng: 102.91209493910293, cc: "th"},{lat: 58.54863888175417, lng: 6.492810173589972, cc: "no"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 53.04992612838225, lng: 19.830899773446344, cc: "pl"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: -17.716944857080573, lng: 177.48281568144702, cc: "fj"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 25.263463250077127, lng: 55.39633003350664, cc: "ae"},{lat: 48.24071026294043, lng: 14.525997624983917, cc: "at"},{lat: 46.7188492918528, lng: 18.482695475464027, cc: "hu"},{lat: 42.56680881292552, lng: -6.781959834231218, cc: "es"},{lat: -5.3507954675918565, lng: 72.24545809051787, cc: "io"},{lat: -0.15738799855801106, lng: -78.43880449542637, cc: "ec"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 56.966796403874866, lng: 23.76803613946442, cc: "lv"},{lat: -21.996269205466138, lng: -47.42096029011582, cc: "br"},{lat: 31.840815417200098, lng: 35.02225689589977, cc: "ps"},{lat: 53.888071638933084, lng: -9.100546581284945, cc: "ie"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 46.95747425009004, lng: 8.34752928059966, cc: "ch"},{lat: 13.23492325079882, lng: -59.54326272836351, cc: "bb"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 43.95471277568775, lng: 12.440431800564554, cc: "sm"},{lat: 59.36003000346186, lng: 27.049543977674855, cc: "ee"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 60.185716921597894, lng: 24.827700144495804, cc: "fi"},{lat: 62.0099303166259, lng: -6.772352164702669, cc: "fo"},{lat: 48.92036137513049, lng: 9.806488366484599, cc: "de"},{lat: 24.26661549354585, lng: 120.68039489622785, cc: "tw"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: -5.269871888316413, lng: 71.89580729118148, cc: "io"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 6.854570938121087, lng: 79.91580830929568, cc: "lk"},{lat: 37.3000550103113, lng: 128.18795138084036, cc: "kr"},{lat: 58.18133155548282, lng: 12.109870410221472, cc: "se"},{lat: 41.748610729685666, lng: 12.649451311207104, cc: "it"},{lat: 56.146740798800465, lng: 28.00548902341481, cc: "lv"},{lat: 51.337396659208004, lng: 6.4292365024637625, cc: "de"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 17.752022708224477, lng: -64.60497325646763, cc: "us"},{lat: 18.44887029418024, lng: -66.14951250122736, cc: "us"},{lat: 47.03043839149347, lng: 28.82378166351677, cc: "md"},{lat: 60.92604713743975, lng: 27.582198793567382, cc: "fi"},{lat: 35.8551333, lng: 139.6007967, cc: "jp"},{lat: 15.883324252483906, lng: 103.2561572274051, cc: "th"},{lat: 54.091584476809935, lng: -4.721221003909777, cc: "im"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 35.35192230169529, lng: 24.43430330682078, cc: "gr"},{lat: 18.85697586063395, lng: 100.55210050056405, cc: "th"},{lat: 15.508320737791989, lng: 120.91125661323174, cc: "ph"},{lat: -7.744136406133762, lng: 111.4186622490737, cc: "id"},{lat: 35.9036375281123, lng: 14.455504602013724, cc: "mt"},{lat: 18.115358132782767, lng: -65.4977750382457, cc: "us"},{lat: 42.45379414342715, lng: 18.76611730034012, cc: "me"},{lat: 49.474180413907796, lng: 14.96185470987107, cc: "cz"},{lat: 34.904256499999995, lng: 139.8503113, cc: "jp"},{lat: 29.302944305292076, lng: 48.04850220680237, cc: "kw"},{lat: 40.16899324144978, lng: 15.691354261528842, cc: "it"},{lat: 7.1712128785694, lng: 79.91578712881025, cc: "lk"},{lat: 49.5945411428272, lng: 6.033236052148012, cc: "lu"},{lat: 11.60687812043606, lng: 104.50198582295589, cc: "kh"},{lat: 55.667900853656505, lng: 11.826626851751957, cc: "dk"},{lat: -5.3507954675918565, lng: 72.24545809051787, cc: "io"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 56.21441700004618, lng: 26.720796615096184, cc: "lv"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 40.14048890000001, lng: 44.8183716, cc: "am"},{lat: 62.0099303166259, lng: -6.772352164702669, cc: "fo"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 43.74996154437467, lng: 10.766493435634763, cc: "it"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 31.385560592070778, lng: 34.721619677334786, cc: "il"},{lat: 46.833475123750695, lng: 26.499510234603964, cc: "ro"},{lat: 18.44887029418024, lng: -66.14951250122736, cc: "us"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 45.868765750273084, lng: 15.51985694749487, cc: "si"},{lat: 69.93804049489181, lng: 22.052007049738965, cc: "no"},{lat: 11.1729402, lng: -60.8382219, cc: "tt"},{lat: 50.25271505868737, lng: 22.87323673477735, cc: "pl"},{lat: -28.92893810204869, lng: 27.870438774511754, cc: "ls"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 35.05973545287827, lng: 139.95193286827453, cc: "jp"},{lat: 50.25927056905576, lng: 14.532629257405684, cc: "cz"},{lat: 37.096182299999995, lng: 41.7094643, cc: "sy"},{lat: 23.930479094519267, lng: 120.48986034568003, cc: "tw"},{lat: 55.444912343190744, lng: 8.647419914823379, cc: "dk"},{lat: 50.40577304431378, lng: 4.206506453235228, cc: "be"},{lat: 17.752022708224477, lng: -64.60497325646763, cc: "us"},{lat: 48.558404199418376, lng: 1.239843680336032, cc: "fr"},{lat: 6.854570938121087, lng: 79.91580830929568, cc: "lk"},{lat: 47.34640942207862, lng: 9.260085990054431, cc: "ch"},{lat: -26.583138049808287, lng: 30.996767426426594, cc: "sz"},{lat: -5.269871888316413, lng: 71.89580729118148, cc: "io"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 17.116751124477673, lng: 106.96701453266309, cc: "vn"},{lat: 52.12824280893717, lng: 20.701518558527894, cc: "pl"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 37.079191507505605, lng: 34.98458706149847, cc: "tr"},{lat: 31.923114349377496, lng: 34.84443494964128, cc: "il"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 47.21008164039459, lng: 2.0624990953102986, cc: "fr"},{lat: 45.87534169577753, lng: 14.213425949466433, cc: "si"},{lat: 55.332414346682334, lng: 10.397027142209055, cc: "dk"},{lat: 51.82613318208887, lng: 5.80826487679223, cc: "nl"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 43.734019018312516, lng: 7.413421418004742, cc: "mc"},{lat: 23.391138691045605, lng: 90.8503149065247, cc: "bd"},{lat: 10.470272425673318, lng: 7.372858870561875, cc: "ng"},{lat: 38.116448349770835, lng: 20.63465546477868, cc: "gr"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 45.1829477, lng: 15.8062946, cc: "ba"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 54.091584476809935, lng: -4.721221003909777, cc: "im"},{lat: 15.021507995575407, lng: 120.57580642757918, cc: "ph"},{lat: 51.06382480711119, lng: 4.207274895169515, cc: "be"},{lat: 49.537385129794075, lng: 6.146640576692182, cc: "lu"},{lat: 29.547794699999997, lng: 34.9534379, cc: "il"},{lat: 42.04549032242899, lng: 2.2466060568128237, cc: "es"},{lat: 40.824679832145605, lng: 15.707053119450473, cc: "it"},{lat: -30.946087398453823, lng: 150.2086804422512, cc: "au"},{lat: -33.76732621733829, lng: 25.414058116023693, cc: "za"},{lat: -26.4972484931364, lng: 31.375230104821917, cc: "sz"},{lat: 37.74454127211557, lng: 38.2680605542717, cc: "tr"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 48.95057753933178, lng: 9.121717779404785, cc: "de"},{lat: 35.340761199999996, lng: 33.3192927, cc: "cy"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 23.90320695250447, lng: 120.53851650637267, cc: "tw"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 1.3333951524518524, lng: 103.98322045231006, cc: "sg"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: 46.690857843926935, lng: 7.89893630072271, cc: "ch"},{lat: 62.0099303166259, lng: -6.772352164702669, cc: "fo"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: -34.37825742099355, lng: -70.81550413513294, cc: "cl"},{lat: 57.52566846049537, lng: 26.775621285519435, cc: "lv"},{lat: 8.849784045435419, lng: -75.93341853920285, cc: "co"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 45.95019074515813, lng: 17.728234874520986, cc: "hu"},{lat: 49.35486961125235, lng: 6.115986787117962, cc: "fr"},{lat: -26.4972484931364, lng: 31.375230104821917, cc: "sz"},{lat: 60.185716921597894, lng: 24.827700144495804, cc: "fi"},{lat: 34.169187917946026, lng: 35.91272180698551, cc: "lb"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 46.98349361040147, lng: 15.91677537606405, cc: "at"},{lat: 24.391689050422194, lng: 88.60302657986553, cc: "bd"},{lat: -22.289952, lng: 166.61056309999998, cc: "fr"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 62.254166700000006, lng: -6.558611099999999, cc: "fo"},{lat: 17.752022708224477, lng: -64.60497325646763, cc: "us"},{lat: 29.547794699999997, lng: 34.9534379, cc: "il"},{lat: 18.412637699999998, lng: -66.6419361, cc: "us"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 55.88009208341379, lng: 37.58326489512529, cc: "ru"},{lat: 48.61202050000001, lng: 14.2748449, cc: "cz"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 41.748610729685666, lng: 12.649451311207104, cc: "it"},{lat: 39.79704659754671, lng: -8.106465273505195, cc: "pt"},{lat: 42.470265157441005, lng: 0.5101807791998393, cc: "es"},{lat: 48.46656860775314, lng: 16.000033320113737, cc: "at"},{lat: 49.919856022382255, lng: 16.943283871240027, cc: "cz"},{lat: 54.139779646540944, lng: -8.641033187925071, cc: "ie"},{lat: 42.99651304696131, lng: -9.209056347539203, cc: "es"},{lat: 13.411266581462147, lng: -89.14020810645921, cc: "sv"},{lat: 50.79690398007644, lng: 3.8415485022347093, cc: "be"},{lat: 49.5945411428272, lng: 6.033236052148012, cc: "lu"},{lat: 50.496027072580006, lng: 26.24086186466176, cc: "ua"},{lat: 49.24482994305504, lng: 18.917400667068033, cc: "sk"},{lat: 43.90879137514983, lng: 12.482133853267825, cc: "sm"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 42.067503776258434, lng: 19.51299077045796, cc: "al"},{lat: 23.48320050369759, lng: 120.34990077447736, cc: "tw"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 63.764879124933735, lng: 9.809551338403024, cc: "no"},{lat: 51.082771532643584, lng: 5.100168416774525, cc: "be"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 41.0931066, lng: -7.3279317, cc: "pt"},{lat: 64.92514101685968, lng: -23.259720209818447, cc: "is"},{lat: -34.910115170781324, lng: -56.178225795014875, cc: "uy"},{lat: -2.6391082533162806, lng: 29.744045397701324, cc: "rw"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 18.44887029418024, lng: -66.14951250122736, cc: "us"},{lat: 18.340391104371655, lng: -64.93051702580232, cc: "us"},{lat: -24.850172863107172, lng: -65.46674925878565, cc: "ar"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: -10.415329775300417, lng: 105.67570126628758, cc: "au"},{lat: 43.391947858443245, lng: 76.98371250880595, cc: "kz"},{lat: 31.385560592070778, lng: 34.721619677334786, cc: "il"},{lat: 45.061638450500176, lng: 18.50011594437766, cc: "hr"},{lat: 11.085599077613628, lng: 104.94927919434708, cc: "kh"},{lat: 17.050258488829982, lng: -61.800253263432005, cc: "ag"},{lat: 54.091584476809935, lng: -4.721221003909777, cc: "im"},{lat: 63.81610729515752, lng: 10.66597198212829, cc: "no"},{lat: 62.0099303166259, lng: -6.772352164702669, cc: "fo"},{lat: 43.734019018312516, lng: 7.413421418004742, cc: "mc"},{lat: -2.9170468023345983, lng: -79.01779304256111, cc: "ec"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: 43.085012447220606, lng: 143.84137497005858, cc: "jp"},{lat: 18.42016866211408, lng: -64.59972691095658, cc: "vg"},{lat: 25.14097779927715, lng: 121.38764948940872, cc: "tw"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 40.14048890000001, lng: 44.8183716, cc: "am"},{lat: 47.09759970258474, lng: 16.11918456084783, cc: "at"},{lat: 13.411266581462147, lng: -89.14020810645921, cc: "sv"},{lat: 36.7186869, lng: 138.64144539999998, cc: "jp"},{lat: 58.85125048258113, lng: 26.849751499777174, cc: "ee"},{lat: 41.90491488728397, lng: 12.455022339108154, cc: "va"},{lat: 11.290137588970843, lng: 104.70729205384087, cc: "kh"},{lat: 32.6995716, lng: 35.576285299999995, cc: "il"},{lat: -6.23469378808594, lng: 71.29513401539131, cc: "io"},{lat: 32.09048456776401, lng: 36.10628119375652, cc: "jo"},{lat: 18.32217637219624, lng: -64.76616240958583, cc: "us"},{lat: 51.58647880458589, lng: 4.716535278742601, cc: "nl"},{lat: 17.752022708224477, lng: -64.60497325646763, cc: "us"},{lat: 63.73010906218902, lng: 8.829843503731778, cc: "no"},{lat: 47.216788032854645, lng: 12.833610078048627, cc: "at"},{lat: 46.56028989804622, lng: 6.5971847724601895, cc: "ch"},{lat: -31.938800941118863, lng: 115.94343027192143, cc: "au"},{lat: 31.840815417200098, lng: 35.02225689589977, cc: "ps"},{lat: 26.115290124567082, lng: 50.481777250579796, cc: "bh"},{lat: 44.270431621336485, lng: 23.79025534450096, cc: "ro"},{lat: 18.340391104371655, lng: -64.93051702580232, cc: "us"},{lat: 42.54803904988177, lng: 22.509685774159486, cc: "bg"},{lat: 55.02229314136478, lng: 15.057062592260552, cc: "dk"},{lat: 15.803826216559914, lng: 99.81797373645242, cc: "th"},{lat: 63.25831060677815, lng: 22.267443157941248, cc: "fi"},{lat: 43.95471277568775, lng: 12.440431800564554, cc: "sm"},{lat: 26.630413705319675, lng: 79.18534887941608, cc: "in"},{lat: 49.45861430944995, lng: 8.430101664198277, cc: "de"},{lat: 25.263463250077127, lng: 55.39633003350664, cc: "ae"},{lat: -44.09951940919007, lng: 170.8339301761655, cc: "nz"},{lat: 13.681840198665117, lng: 103.17484050912797, cc: "kh"},{lat: 36.354599854166395, lng: 128.29485871083546, cc: "kr"},{lat: -7.986933297799347, lng: 110.75411150291141, cc: "id"},{lat: 42.001797411804795, lng: 12.683016650838969, cc: "it"},{lat: 49.35486961125235, lng: 6.115986787117962, cc: "fr"},{lat: 43.73247121013651, lng: 7.417881039900229, cc: "mc"},{lat: 25.277780889726696, lng: 51.52411427147742, cc: "qa"},{lat: 36.129219349152685, lng: -5.350893683486944, cc: "gi"},{lat: -7.517885590125084, lng: 112.46116746735896, cc: "id"},{lat: 18.32217637219624, lng: -64.76616240958583, cc: "us"},{lat: 24.93119231935868, lng: 55.47545458197017, cc: "ae"},{lat: 17.34229851982545, lng: -62.71392994220008, cc: "kn"},{lat: 49.99976399516183, lng: 6.017063802525762, cc: "lu"},{lat: 13.599567063444908, lng: 103.1632640442162, cc: "kh"},{lat: 48.4188714566714, lng: 18.6249548825215, cc: "sk"},{lat: -5.269871888316413, lng: 71.89580729118148, cc: "io"},{lat: 46.98349361040147, lng: 15.91677537606405, cc: "at"},{lat: 6.854570938121087, lng: 79.91580830929568, cc: "lk"},{lat: 54.32300398737054, lng: -4.385101461240735, cc: "im"},{lat: 48.29995731580481, lng: 5.266564377175694, cc: "fr"},{lat: 39.759291873027856, lng: 19.816952414595043, cc: "gr"},{lat: 18.200201961925956, lng: -67.1521005856378, cc: "us"},{lat: 43.16807439094916, lng: -2.0650039354668195, cc: "es"},{lat: 50.30550295800946, lng: 2.289509787407297, cc: "fr"},{lat: 35.89009217186417, lng: 14.519540139644576, cc: "mt"},{lat: -26.4972484931364, lng: 31.375230104821917, cc: "sz"},{lat: 34.169187917946026, lng: 35.91272180698551, cc: "lb"},{lat: 33.19993983898626, lng: 130.60003585258917, cc: "jp"},
            ];
            var random = Math.floor(Math.random() * coordinates.length);
            var newSrc = "https://www.google.com/maps/embed?pb=!6m8!1m7!1s0!2m3" + '!1d' + coordinates[random].lat + '!2d' + coordinates[random].lng + "!3f0!4f0!5f0";
            reallat = coordinates[random].lat
            reallng = coordinates[random].lng
            iframe.src = newSrc;
        }

        function guess() {
            guessed = true;
            var guesslat = guessmarker.getLatLng().lat
            var guesslng = guessmarker.getLatLng().lng

            realmarker = L.marker([reallat,reallng]).addTo(map);

            pathLine = L.polyline([[reallat,reallng],[guesslat,guesslng]]).addTo(map)
            pathLine.setStyle({
                color: 'red',
                weight: 2,
                opacity: 0.9,
                smoothFactor: 1
            });

            document.getElementById("topbar").style.display = "none"
            document.getElementById("winscreen").style.display = "block"
            document.getElementById("map").style.transition = "none";
            document.getElementById("map").style.height = "100%"
            guessbutton.style.display = "none";

            changeClass(document.getElementById("mapwrapper"),"mapsmall","mapfs")

            map.invalidateSize();

            var points = L.featureGroup([realmarker,guessmarker])

            map.fitBounds(points.getBounds().pad(0.5));

            map.dragging.disable();
            map.touchZoom.disable();
            map.doubleClickZoom.disable();
            map.scrollWheelZoom.disable();
            map.boxZoom.disable();
            map.keyboard.disable();
            if (map.tap) map.tap.disable();

            distance = calculateDistance(reallat,reallng,guesslat,guesslng);
            var formattedDistance;
            if (distance > 1000) {
                formattedDistance = new Intl.NumberFormat().format(Math.round(distance / 1000)) + ' km';
            } else {
                formattedDistance = new Intl.NumberFormat().format(Math.round(distance)) + ' m';
            }
            document.getElementById("distance").innerHTML = formattedDistance;

            let minutes = Math.floor(time / 60);
            let seconds = time % 60;
            document.getElementById('winscreen.timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}s`;

            newLocation()
        }

        function resetMap() {
            var guesslat = null
            var guesslng = null

            map.removeLayer(guessmarker);
            map.removeLayer(realmarker);
            pathLine.removeFrom(map);

            document.getElementById("winscreen").style.display = null
            document.getElementById("map").style.transition = null
            document.getElementById("map").style.height = null
            document.getElementById("topbar").style.display = null
            guessbutton.style.display = null

            changeClass(document.getElementById("mapwrapper"),"mapfs","mapsmall")

            mapwrapper.classList.add('no-hover');
            mapwrapper.addEventListener('transitionend', function(event) {
                if (event.propertyName === 'width' || event.propertyName === 'height') {
                    this.classList.remove('no-hover');
                }
            });

            guessbutton.style.display = null;

            map.dragging.enable();
            map.touchZoom.enable();
            map.doubleClickZoom.enable();
            map.scrollWheelZoom.enable();
            map.boxZoom.enable();
            map.keyboard.enable();
            if (map.tap) map.tap.enable();
            document.getElementById('map').style.cursor='grab';

            guessed = false

            map.setView([0, 0], 0);

            time = 0
            let minutes = Math.floor(time / 60);
            let seconds = time % 60;
            document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        function updateTimer() {
            time++;
            let minutes = Math.floor(time / 60);
            let seconds = time % 60;
            document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }



        newLocation()
        setInterval(updateTimer, 1000);
        guessbutton.addEventListener('click', guess);
        newlocationbutton.addEventListener('click', resetMap);
        initMap()
    }

</script>
</body>
</html>
